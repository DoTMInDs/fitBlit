{% extends "base.html" %}
{% load static %}
{% load tailwind_filters %}
{% block title %}News{% endblock  %}
{% block content %}
    {% include "partials/nav.html" %}
    
    <!-- Mobile-First News Page -->
    <div class="min-h-screen bg-gray-50">
        <!-- Header Section -->
        <div class="bg-white shadow-sm border-b border-gray-200 sticky top-0 z-10">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex items-center justify-between h-16">
                    <h1 class="text-xl font-bold text-gray-900">Latest News</h1>
                    <div class="flex items-center space-x-2">
                        <button class="p-2 rounded-full hover:bg-teal-50 transition-colors">
                            <i class="fa-solid fa-search text-teal-600"></i>
                        </button>
                        <button class="p-2 rounded-full hover:bg-teal-50 transition-colors">
                            <i class="fa-solid fa-filter text-teal-600"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
            <div class="flex flex-col lg:flex-row gap-6">
                <!-- News Articles Section -->
                <div class="flex-1">
                    <!-- Category Header -->
                    <div class="mb-6">
                        <div class="bg-gradient-to-r from-teal-500 to-cyan-500 rounded-lg shadow-sm">
                            <h2 class="px-4 py-3 text-white font-semibold text-lg">
                                <i class="fa-solid fa-newspaper mr-2"></i>
                                General News
                            </h2>
                        </div>
                    </div>

                    <!-- Articles Grid -->
                    <div class="space-y-4">
                        {% for article in article_page_obj %}
                            <article class="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden hover:shadow-md transition-shadow duration-300">
                                <!-- Article Header -->
                                <div class="p-4 sm:p-6">
                                    <div class="flex items-start justify-between mb-3">
                                        <h3 class="text-lg sm:text-xl font-bold text-gray-900 leading-tight line-clamp-2">
                                            {{ article.title }}
                                        </h3>
                                        {% if article.author == request.user %}
                                            <div class="flex items-center space-x-1 ml-3">
                                                <a href="{% url 'user-dashboard-edit' article.id %}" 
                                                   class="p-2 rounded-full hover:bg-teal-50 text-teal-600 transition-colors">
                                                    <i class="fa-regular fa-pen-to-square text-sm"></i>
                                                </a>
                                                <a href="{% url 'user-post-delete' article.id %}" 
                                                   class="p-2 rounded-full hover:bg-red-50 text-red-600 transition-colors">
                                                    <i class="fa-solid fa-trash-can text-sm"></i>
                                                </a>
                                            </div>
                                        {% endif %}
                                    </div>

                                    <!-- Article Meta -->
                                    <div class="flex flex-wrap items-center gap-4 text-sm text-gray-600 mb-4">
                                        <div class="flex items-center">
                                            <i class="fa-solid fa-clock mr-1"></i>
                                            <span>{{ article.dated_on|date:"M d, Y" }}</span>
                                        </div>
                                        <div class="flex items-center">
                                            <i class="fa-solid fa-comments mr-1"></i>
                                            <span>{{ article.article_comment_count }} Comments</span>
                                        </div>
                                        <div class="flex items-center">
                                            <i class="fa-solid fa-user mr-1"></i>
                                            <a href="{% url 'profile' %}" class="hover:text-teal-600 transition-colors">
                                                {{ article.author }}
                                            </a>
                                        </div>
                                    </div>

                                    <!-- Article Content -->
                                    <div class="flex gap-4">
                                        {% if article.image %}
                                            <div class="flex-shrink-0">
                                                <img src="{{ article.image.url }}" 
                                                     class="w-20 h-20 sm:w-24 sm:h-24 rounded-lg object-cover shadow-sm" 
                                                     alt="{{ article.title }}">
                                            </div>
                                        {% endif %}
                                        <div class="flex-1 min-w-0">
                                            <p class="text-gray-700 text-sm sm:text-base leading-relaxed line-clamp-3">
                                                {{ article.article_content|truncatewords:15 }}
                                            </p>
                                        </div>
                                    </div>
                                </div>

                                <!-- Article Actions -->
                                <div class="border-t border-gray-100 bg-gradient-to-r from-teal-50 to-cyan-50 px-4 sm:px-6 py-3">
                                    <div class="flex items-center justify-between">
                                        <a href="{% url 'blog-post-detail' article.id %}" 
                                           class="inline-flex items-center px-4 py-2 bg-gradient-to-r from-teal-500 to-cyan-500 text-white text-sm font-medium rounded-lg hover:from-teal-600 hover:to-cyan-600 transition-all">
                                            <i class="fa-solid fa-eye mr-2"></i>
                                            Read More
                                        </a>
                                        <div class="flex items-center space-x-2">
                                            <button class="p-2 rounded-full hover:bg-teal-100 transition-colors">
                                                <i class="fa-regular fa-heart text-teal-600"></i>
                                            </button>
                                            <button class="p-2 rounded-full hover:bg-teal-100 transition-colors">
                                                <i class="fa-solid fa-share text-teal-600"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </article>
                        {% endfor %}
                    </div>

                    <!-- Pagination -->
                    <div class="mt-8">
                        <nav class="flex items-center justify-center">
                            <div class="flex items-center space-x-2">
                                {% if article_page_obj.has_previous %}
                                    <a href="?article_page={{ article_page_obj.previous_page_number }}" 
                                       class="inline-flex items-center px-3 py-2 text-sm font-medium text-teal-700 bg-white border border-teal-300 rounded-lg hover:bg-teal-50 transition-colors">
                                        <i class="fa-solid fa-arrow-left mr-2"></i>
                                        Previous
                                    </a>
                                {% else %}
                                    <span class="inline-flex items-center px-3 py-2 text-sm font-medium text-gray-400 bg-gray-100 border border-gray-300 rounded-lg cursor-not-allowed">
                                        <i class="fa-solid fa-arrow-left mr-2"></i>
                                        Previous
                                    </span>
                                {% endif %}

                                <div class="flex items-center space-x-1">
                                    {% for num in article_page_obj.paginator.page_range %}
                                        {% if article_page_obj.number == num %}
                                            <span class="inline-flex items-center px-3 py-2 text-sm font-medium text-white bg-gradient-to-r from-teal-500 to-cyan-500 border border-teal-500 rounded-lg">
                                                {{ num }}
                                            </span>
                                        {% else %}
                                            <a href="?article_page={{ num }}" 
                                               class="inline-flex items-center px-3 py-2 text-sm font-medium text-teal-700 bg-white border border-teal-300 rounded-lg hover:bg-teal-50 transition-colors">
                                                {{ num }}
                                            </a>
                                        {% endif %}
                                    {% endfor %}
                                </div>

                                {% if article_page_obj.has_next %}
                                    <a href="?article_page={{ article_page_obj.next_page_number }}" 
                                       class="inline-flex items-center px-3 py-2 text-sm font-medium text-teal-700 bg-white border border-teal-300 rounded-lg hover:bg-teal-50 transition-colors">
                                        Next
                                        <i class="fa-solid fa-arrow-right ml-2"></i>
                                    </a>
                                {% else %}
                                    <span class="inline-flex items-center px-3 py-2 text-sm font-medium text-gray-400 bg-gray-100 border border-gray-300 rounded-lg cursor-not-allowed">
                                        Next
                                        <i class="fa-solid fa-arrow-right ml-2"></i>
                                    </span>
                                {% endif %}
                            </div>
                        </nav>
                    </div>
                </div>

                <!-- Spotlight Sidebar (Hidden on Mobile) -->
                <div class="hidden lg:block lg:w-80">
                    <div class="sticky top-20">
                        <div class="bg-gradient-to-r from-cyan-500 to-teal-500 rounded-lg shadow-sm mb-4">
                            <h2 class="px-4 py-3 text-white font-semibold text-lg">
                                <i class="fa-solid fa-star mr-2"></i>
                                Spotlight
                            </h2>
                        </div>
                        
                        <div class="space-y-4">
                            {% for blog_post in posts %}
                                <a href="{% url 'blog-postmodel-detail' blog_post.id %}" 
                                   class="block bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden hover:shadow-md transition-shadow duration-300">
                                    {% if blog_post.image %}
                                        <div class="aspect-video overflow-hidden">
                                            <img src="{{ blog_post.image.url }}" 
                                                 class="w-full h-full object-cover" 
                                                 alt="{{ blog_post.title }}">
                                        </div>
                                    {% endif %}
                                    <div class="p-4">
                                        <h4 class="font-semibold text-gray-900 mb-2 line-clamp-2">
                                            {{ blog_post.title|truncatewords:4 }}
                                        </h4>
                                        <div class="flex items-center justify-between text-sm text-gray-600">
                                            <div class="flex items-center">
                                                <i class="fa-solid fa-clock mr-1"></i>
                                                <span>{{ blog_post.created_on|date:"M d" }}</span>
                                            </div>
                                            <div class="flex items-center">
                                                <i class="fa-solid fa-comments mr-1"></i>
                                                <span>{{ blog_post.post_comment_count }}</span>
                                            </div>
                                        </div>
                                        <div class="mt-2 text-sm text-gray-600">
                                            <i class="fa-solid fa-user mr-1"></i>
                                            {{ blog_post.author }}
                                        </div>
                                    </div>
                                </a>
                            {% endfor %}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer - Hidden on Mobile -->
    <div class="hidden md:block">
        {% include "partials/footer.html" %}
    </div>


    
{% endblock content %}
    