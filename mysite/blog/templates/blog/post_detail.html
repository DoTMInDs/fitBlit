{% extends "base.html" %}
{% load static %}
{% load tailwind_filters %}
{% block title %}{{articles.title}} - FitBlit{% endblock  %}
{% block content %}
    {% include "partials/nav.html" %}
    
    <!-- Mobile-First Article Detail -->
    <main class="min-h-screen bg-white">
        <!-- Mobile Header -->
        <header class="max-w-7xl mx-auto px-4 sticky top-0 z-40 bg-white border-b border-gray-200">
            <div class="flex items-center justify-between h-16 px-4">
                <!-- Back Button -->
                <button onclick="goBack()" 
                        class="w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center hover:bg-gray-200 transition-colors">
                    <i class="fa-solid fa-arrow-left text-gray-700"></i>
                </button>
                
                <!-- Article Title (Truncated) -->
                <div class="flex-1 mx-4 min-w-0">
                    <h1 class="text-sm font-semibold text-gray-900 truncate">
                        {{ articles.sub_title|truncatechars:40 }}
                    </h1>
                </div>
                
                <!-- Mobile Actions -->
                <div class="flex items-center space-x-2">
                    <button class="w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center hover:bg-gray-200 transition-colors">
                        <i class="fa-solid fa-share-nodes text-gray-700"></i>
                    </button>
                    <button class="w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center hover:bg-gray-200 transition-colors">
                        <i class="fa-regular fa-bookmark text-gray-700"></i>
                    </button>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <article class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
            <div class="flex flex-col lg:flex-row gap-8">
                <div class="flex-1">
                    <!-- Article Hero -->
                    <div class="pt-6">
                        <!-- Article Image (Mobile First) -->
                        {% if articles.image %}
                        <div class="rounded-2xl overflow-hidden mb-6 shadow-lg">
                            <img src="{{ articles.image.url }}" 
                                alt="{{ articles.sub_title }}"
                                class="w-full h-64 md:h-80 object-cover"
                                loading="lazy">
                        </div>
                        {% endif %}
                        
                        <!-- Article Meta (Stacked on Mobile) -->
                        <div class="mb-6 space-y-3">
                            <!-- Category & Date -->
                            <div class="flex items-center space-x-3">
                                <span class="px-3 py-1 bg-gradient-to-r from-teal-100 to-cyan-100 text-teal-700 rounded-full text-sm font-medium">
                                    {{ articles.slug|default:"Article" }}
                                </span>
                                <span class="text-gray-500">•</span>
                                <time class="text-sm text-gray-600">{{ articles.dated_on|date:"M d, Y" }}</time>
                            </div>
                            
                            <!-- Full Title -->
                            <h1 class="text-2xl md:text-3xl font-bold text-gray-900 leading-tight">
                                {{ articles.sub_title }}
                            </h1>
                            
                            <!-- Author Info -->
                            <div class="flex items-center space-x-3 pt-3">
                                <div class="w-10 h-10 bg-gradient-to-br from-teal-500 to-cyan-500 rounded-full flex items-center justify-center text-white font-bold">
                                    {{ articles.author.username|first|upper }}
                                </div>
                                <div class="flex-1 min-w-0">
                                    <p class="font-semibold text-gray-900 truncate">{{ articles.author }}</p>
                                    <p class="text-sm text-gray-500">Author</p>
                                </div>
                                <button class="px-4 py-2 border border-gray-300 text-gray-700 rounded-xl text-sm hover:bg-gray-50 transition-colors">
                                    Follow
                                </button>
                            </div>
                            
                            <!-- Article Stats -->
                            <div class="flex items-center space-x-4 pt-4 border-t border-gray-100">
                                <div class="flex items-center space-x-2 text-gray-600">
                                    <i class="fa-regular fa-comment"></i>
                                    <span class="text-sm">{{ articles.article_comment_count }}</span>
                                </div>
                                <div class="flex items-center space-x-2 text-gray-600">
                                    <i class="fa-regular fa-eye"></i>
                                    <span class="text-sm">1.2k</span>
                                </div>
                                <div class="flex items-center space-x-2 text-gray-600">
                                    <i class="fa-regular fa-clock"></i>
                                    <span class="text-sm">8 min</span>
                                </div>
                                <div class="flex-1"></div>
                                <button class="w-9 h-9 bg-gray-100 rounded-lg flex items-center justify-center hover:bg-gray-200">
                                    <i class="fa-solid fa-ellipsis-h text-gray-600"></i>
                                </button>
                            </div>
                        </div>
                        
                        <!-- Article Content -->
                        <div class="prose prose-sm md:prose-base max-w-none text-gray-700 leading-relaxed space-y-4">
                            {{ articles.article_content|linebreaks }}
                        </div>
                        
                        <!-- Article Tags -->
                        <div class="mt-8 pt-8 border-t border-gray-100">
                            <h3 class="text-sm font-semibold text-gray-900 mb-3">Tags</h3>
                            <div class="flex flex-wrap gap-2">
                                <span class="px-3 py-1.5 bg-gradient-to-r from-teal-50 to-cyan-50 text-teal-700 rounded-lg text-sm">
                                    #{{ articles.slug|default:"general" }}
                                </span>
                                <!-- Additional tags can be added here -->
                            </div>
                        </div>
                        
                        <!-- Mobile Actions Bar -->
                        <div class="fixed bottom-4 left-4 right-4 bg-white rounded-2xl shadow-lg border border-gray-200 p-3 z-30 md:hidden">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-3">
                                    <button class="flex-1 flex items-center justify-center space-x-2 px-4 py-2.5 bg-gray-100 rounded-xl hover:bg-gray-200 transition-colors">
                                        <i class="fa-regular fa-heart text-gray-700"></i>
                                        <span class="text-sm font-medium">Like</span>
                                    </button>
                                    <button class="flex-1 flex items-center justify-center space-x-2 px-4 py-2.5 bg-gray-100 rounded-xl hover:bg-gray-200 transition-colors">
                                        <i class="fa-solid fa-share text-gray-700"></i>
                                        <span class="text-sm font-medium">Share</span>
                                    </button>
                                </div>
                                <button class="w-10 h-10 bg-gradient-to-r from-teal-500 to-cyan-500 text-white rounded-xl flex items-center justify-center">
                                    <i class="fa-solid fa-arrow-up"></i>
                                </button>
                            </div>
                        </div>
                        
                        <!-- Desktop Actions (Hidden on Mobile) -->
                        <div class="hidden md:block mt-8 pt-8 border-t border-gray-100">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-4">
                                    <button class="flex items-center space-x-2 px-4 py-2.5 bg-gray-100 text-gray-700 rounded-xl hover:bg-gray-200 transition-colors">
                                        <i class="fa-regular fa-heart"></i>
                                        <span class="font-medium">Like</span>
                                    </button>
                                    <button class="flex items-center space-x-2 px-4 py-2.5 bg-gray-100 text-gray-700 rounded-xl hover:bg-gray-200 transition-colors">
                                        <i class="fa-solid fa-share"></i>
                                        <span class="font-medium">Share</span>
                                    </button>
                                    <button class="flex items-center space-x-2 px-4 py-2.5 bg-gray-100 text-gray-700 rounded-xl hover:bg-gray-200 transition-colors">
                                        <i class="fa-regular fa-bookmark"></i>
                                        <span class="font-medium">Save</span>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Author Card -->
                    <section class="mt-8 bg-gradient-to-br from-gray-50 to-white rounded-2xl border border-gray-200 p-6">
                        <h3 class="text-lg font-bold text-gray-900 mb-4">About the Author</h3>
                        <div class="flex items-start space-x-4">
                            <div class="w-16 h-16 bg-gradient-to-br from-teal-500 to-cyan-500 rounded-full flex items-center justify-center text-white text-2xl font-bold flex-shrink-0">
                                {{ articles.author.username|first|upper }}
                            </div>
                            <div>
                                <h4 class="font-bold text-gray-900 mb-1">{{ articles.author.username }}</h4>
                                <p class="text-gray-600 text-sm mb-3">
                                    Passionate writer sharing insights on fitness, wellness, and healthy living. 
                                    Loves to inspire others through valuable content.
                                </p>
                                <div class="flex items-center space-x-3">
                                    <a href="#" class="text-sm text-teal-600 hover:text-teal-700 font-medium">
                                        <i class="fa-solid fa-newspaper mr-1"></i>
                                        12 Articles
                                    </a>
                                    <a href="#" class="text-sm text-teal-600 hover:text-teal-700 font-medium">
                                        <i class="fa-solid fa-user-plus mr-1"></i>
                                        Follow
                                    </a>
                                </div>
                            </div>
                        </div>
                    </section>
                    
                    <!-- Comments Section -->
                    <section class="mt-8">
                        <!-- Comment Form -->
                        <div class="bg-white rounded-2xl border border-gray-200 overflow-hidden">
                            <div class="bg-gradient-to-r from-teal-50 to-cyan-50 px-4 py-3">
                                <h3 class="font-bold text-gray-900 flex items-center">
                                    <i class="fa-solid fa-comment-dots text-teal-600 mr-2"></i>
                                    Join the Conversation
                                </h3>
                            </div>
                            <div class="p-4">
                                <form action="" method="post" class="space-y-4">
                                    {% csrf_token %}
                                    <div class="space-y-3">
                                        {{ c_form|crispy }}
                                    </div>
                                    <button type="submit" 
                                            class="w-full px-4 py-3 bg-gradient-to-r from-teal-500 to-cyan-500 text-white font-medium rounded-xl hover:from-teal-600 hover:to-cyan-600 transition-colors shadow-md hover:shadow-lg">
                                        <i class="fa-solid fa-paper-plane mr-2"></i>
                                        Post Comment
                                    </button>
                                </form>
                            </div>
                        </div>
                        
                        <!-- Comments List -->
                        <div class="mt-6 bg-white rounded-2xl border border-gray-200 overflow-hidden">
                            <div class="bg-gradient-to-r from-teal-50 to-cyan-50 px-4 py-3">
                                <div class="flex items-center justify-between">
                                    <h3 class="font-bold text-gray-900 flex items-center">
                                        <i class="fa-solid fa-comments text-teal-600 mr-2"></i>
                                        Comments
                                    </h3>
                                    <span class="bg-white px-2 py-1 rounded-lg text-sm font-medium text-teal-700">
                                        {{ articles.article_comment_count }}
                                    </span>
                                </div>
                            </div>
                            
                            <div class="divide-y divide-gray-100">
                                {% for comment in articles.articlecomment_set.all %}
                                <div class="p-4 hover:bg-gray-50/50 transition-colors">
                                    <div class="flex space-x-3">
                                        <!-- User Avatar -->
                                        <div class="flex-shrink-0">
                                            {% if comment.user.profilemodel.image %}
                                                <img class="w-10 h-10 rounded-full object-cover border-2 border-white shadow" 
                                                    src="{{ comment.user.profilemodel.image.url }}" 
                                                    alt="{{ comment.user.username }}"
                                                    loading="lazy">
                                            {% else %}
                                                <div class="w-10 h-10 bg-gradient-to-br from-teal-500 to-cyan-500 rounded-full flex items-center justify-center text-white font-bold">
                                                    {{ comment.user.username|first|upper }}
                                                </div>
                                            {% endif %}
                                        </div>
                                        
                                        <!-- Comment Content -->
                                        <div class="flex-1 min-w-0">
                                            <div class="flex items-start justify-between mb-1">
                                                <div>
                                                    <h4 class="font-semibold text-gray-900 text-sm">{{ comment.user.username }}</h4>
                                                    <p class="text-xs text-gray-500">{{ comment.created_on|timesince }} ago</p>
                                                </div>
                                                <button class="text-gray-400 hover:text-gray-600">
                                                    <i class="fa-solid fa-ellipsis-h text-sm"></i>
                                                </button>
                                            </div>
                                            <p class="text-gray-700 text-sm mb-2">{{ comment.content }}</p>
                                            
                                            <!-- Comment Actions -->
                                            <div class="flex items-center space-x-3">
                                                <button class="text-xs text-gray-500 hover:text-teal-600 flex items-center space-x-1">
                                                    <i class="fa-regular fa-heart"></i>
                                                    <span>Like</span>
                                                </button>
                                                <button class="text-xs text-gray-500 hover:text-teal-600 flex items-center space-x-1">
                                                    <i class="fa-solid fa-reply"></i>
                                                    <span>Reply</span>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                {% empty %}
                                <div class="p-8 text-center">
                                    <div class="w-16 h-16 bg-gradient-to-br from-gray-50 to-gray-100 rounded-full flex items-center justify-center mx-auto mb-4">
                                        <i class="fa-solid fa-comments text-gray-400"></i>
                                    </div>
                                    <h4 class="text-sm font-semibold text-gray-900 mb-1">No comments yet</h4>
                                    <p class="text-xs text-gray-600">Be the first to share your thoughts!</p>
                                </div>
                                {% endfor %}
                            </div>
                        </div>
                    </section>
                    
                    <!-- Related Articles -->
                    <section class="mt-8 mb-16">
                        <div class="bg-white rounded-2xl border border-gray-200 overflow-hidden">
                            <div class="bg-gradient-to-r from-teal-50 to-cyan-50 px-4 py-3">
                                <h3 class="font-bold text-gray-900 flex items-center">
                                    <i class="fa-solid fa-newspaper text-teal-600 mr-2"></i>
                                    You Might Also Like
                                </h3>
                            </div>
                            <div class="p-4">
                                <div class="space-y-4">
                                    <!-- Related Article 1 -->
                                    <a href="#" class="block group">
                                        <div class="flex items-start space-x-3">
                                            <div class="w-20 h-20 bg-gradient-to-r from-teal-500 to-cyan-500 rounded-xl flex-shrink-0"></div>
                                            <div class="flex-1 min-w-0">
                                                <h4 class="font-semibold text-gray-900 text-sm mb-1 group-hover:text-teal-600 transition-colors line-clamp-2">
                                                    Related Fitness Article Title Goes Here
                                                </h4>
                                                <p class="text-xs text-gray-600 mb-2 line-clamp-2">
                                                    Brief description of the related article content...
                                                </p>
                                                <div class="flex items-center text-xs text-gray-500">
                                                    <span>5 min read</span>
                                                    <span class="mx-2">•</span>
                                                    <span>2 days ago</span>
                                                </div>
                                            </div>
                                        </div>
                                    </a>
                                    
                                    <!-- Related Article 2 -->
                                    <a href="#" class="block group">
                                        <div class="flex items-start space-x-3">
                                            <div class="w-20 h-20 bg-gradient-to-r from-cyan-500 to-teal-500 rounded-xl flex-shrink-0"></div>
                                            <div class="flex-1 min-w-0">
                                                <h4 class="font-semibold text-gray-900 text-sm mb-1 group-hover:text-teal-600 transition-colors line-clamp-2">
                                                    Wellness Tips for Healthy Living
                                                </h4>
                                                <p class="text-xs text-gray-600 mb-2 line-clamp-2">
                                                    Essential wellness tips for maintaining a healthy lifestyle...
                                                </p>
                                                <div class="flex items-center text-xs text-gray-500">
                                                    <span>7 min read</span>
                                                    <span class="mx-2">•</span>
                                                    <span>1 week ago</span>
                                                </div>
                                            </div>
                                        </div>
                                    </a>
                                    
                                    <!-- Related Article 3 -->
                                    <a href="#" class="block group">
                                        <div class="flex items-start space-x-3">
                                            <div class="w-20 h-20 bg-gradient-to-r from-teal-400 to-cyan-400 rounded-xl flex-shrink-0"></div>
                                            <div class="flex-1 min-w-0">
                                                <h4 class="font-semibold text-gray-900 text-sm mb-1 group-hover:text-teal-600 transition-colors line-clamp-2">
                                                    Beginner's Guide to Fitness
                                                </h4>
                                                <p class="text-xs text-gray-600 mb-2 line-clamp-2">
                                                    Everything you need to know to start your fitness journey...
                                                </p>
                                                <div class="flex items-center text-xs text-gray-500">
                                                    <span>10 min read</span>
                                                    <span class="mx-2">•</span>
                                                    <span>3 days ago</span>
                                                </div>
                                            </div>
                                        </div>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </section>
                </div>

                 <!-- Sidebar -->
                <div class="lg:w-80">
                    <div class="sticky top-24 space-y-6">
                        <!-- Trending Now -->
                        <div class="bg-gradient-to-br from-white to-gray-50 rounded-2xl shadow-lg border border-gray-100 overflow-hidden">
                            <div class="bg-gradient-to-r from-teal-500 to-cyan-500 px-6 py-4">
                                <h3 class="text-lg font-bold text-white flex items-center">
                                    <i class="fa-solid fa-fire mr-2"></i>
                                    Trending Now
                                </h3>
                            </div>
                            <div class="p-6">
                                <div class="space-y-4">
                                    {% for blog_post in posts|slice:":3" %}
                                    <a href="{% url 'blog-postmodel-detail' blog_post.id %}" 
                                       class="group block">
                                        <div class="flex items-start space-x-3">
                                            <div class="flex-shrink-0 w-16 h-16 bg-gradient-to-br from-teal-100 to-cyan-100 rounded-xl overflow-hidden">
                                                {% if blog_post.image %}
                                                <img src="{{ blog_post.image.url }}" 
                                                     alt="{{ blog_post.title }}"
                                                     class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-300">
                                                {% else %}
                                                <div class="w-full h-full flex items-center justify-center">
                                                    <i class="fa-solid fa-newspaper text-teal-600"></i>
                                                </div>
                                                {% endif %}
                                            </div>
                                            <div class="flex-1 min-w-0">
                                                <h4 class="text-sm font-semibold text-gray-900 group-hover:text-teal-600 transition-colors line-clamp-2">
                                                    {{ blog_post.title }}
                                                </h4>
                                                <div class="mt-1 flex items-center text-xs text-gray-500">
                                                    <span>{{ blog_post.created_on|date:"M d" }}</span>
                                                    <span class="mx-1">•</span>
                                                    <span>{{ blog_post.post_comment_count }} comments</span>
                                                </div>
                                            </div>
                                        </div>
                                    </a>
                                    {% endfor %}
                                </div>
                            </div>
                        </div>

                        <!-- Popular Categories -->
                        <div class="bg-gradient-to-br from-white to-gray-50 rounded-2xl shadow-lg border border-gray-100 overflow-hidden">
                            <div class="bg-gradient-to-r from-cyan-500 to-teal-500 px-6 py-4">
                                <h3 class="text-lg font-bold text-white flex items-center">
                                    <i class="fa-solid fa-tags mr-2"></i>
                                    Popular Topics
                                </h3>
                            </div>
                            <div class="p-6">
                                <div class="flex flex-wrap gap-2">
                                    <span class="px-3 py-1.5 bg-gradient-to-r from-teal-50 to-cyan-50 text-teal-700 rounded-lg text-sm font-medium hover:from-teal-100 hover:to-cyan-100 transition-colors cursor-pointer">
                                        Fitness
                                    </span>
                                    <span class="px-3 py-1.5 bg-gradient-to-r from-teal-50 to-cyan-50 text-teal-700 rounded-lg text-sm font-medium hover:from-teal-100 hover:to-cyan-100 transition-colors cursor-pointer">
                                        Wellness
                                    </span>
                                    <span class="px-3 py-1.5 bg-gradient-to-r from-teal-50 to-cyan-50 text-teal-700 rounded-lg text-sm font-medium hover:from-teal-100 hover:to-cyan-100 transition-colors cursor-pointer">
                                        Nutrition
                                    </span>
                                    <span class="px-3 py-1.5 bg-gradient-to-r from-teal-50 to-cyan-50 text-teal-700 rounded-lg text-sm font-medium hover:from-teal-100 hover:to-cyan-100 transition-colors cursor-pointer">
                                        Training
                                    </span>
                                    <span class="px-3 py-1.5 bg-gradient-to-r from-teal-50 to-cyan-50 text-teal-700 rounded-lg text-sm font-medium hover:from-teal-100 hover:to-cyan-100 transition-colors cursor-pointer">
                                        Mental Health
                                    </span>
                                    <span class="px-3 py-1.5 bg-gradient-to-r from-teal-50 to-cyan-50 text-teal-700 rounded-lg text-sm font-medium hover:from-teal-100 hover:to-cyan-100 transition-colors cursor-pointer">
                                        Community
                                    </span>
                                </div>
                            </div>
                        </div>

                        <!-- Newsletter -->
                        <div class="bg-gradient-to-br from-teal-500 to-cyan-600 rounded-2xl shadow-lg overflow-hidden">
                            <div class="p-6 text-center">
                                <div class="w-16 h-16 bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center mx-auto mb-4">
                                    <i class="fa-solid fa-envelope text-white text-2xl"></i>
                                </div>
                                <h3 class="text-xl font-bold text-white mb-2">Stay Updated</h3>
                                <p class="text-teal-100 mb-6">Get the latest articles delivered to your inbox</p>
                                <form class="space-y-3">
                                    <input type="email" 
                                           placeholder="Your email address"
                                           class="w-full px-4 py-3 bg-white/20 backdrop-blur-sm border border-white/30 text-white placeholder-teal-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-white/50">
                                    <button type="submit" 
                                            class="w-full px-4 py-3 bg-white text-teal-700 font-semibold rounded-xl hover:bg-teal-50 transition-colors">
                                        Subscribe Now
                                    </button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </article>

        <!-- Mobile Bottom Navigation Spacer -->
        <div class="h-20 md:hidden"></div>
    </main>

    <!-- Footer -->
    {% include "partials/footer.html" %}

    <style>
        .prose {
            color: #374151;
        }
        
        .prose p {
            margin-bottom: 1.25em;
            line-height: 1.7;
        }
        
        .prose-sm {
            font-size: 0.875rem;
        }
        
        @media (min-width: 768px) {
            .prose-base {
                font-size: 1rem;
            }
        }
        
        .line-clamp-2 {
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
    </style>

    <script>
        function goBack() {
            window.history.back();
        }
        
        // Mobile Actions Scroll Behavior
        document.addEventListener('DOMContentLoaded', function() {
            const mobileActionsBar = document.querySelector('.fixed.bottom-4');
            const scrollToTopBtn = document.querySelector('button:has(.fa-arrow-up)');
            
            if (scrollToTopBtn) {
                scrollToTopBtn.addEventListener('click', function() {
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                });
            }
            
            // Hide/show mobile actions based on scroll
            let lastScrollTop = 0;
            window.addEventListener('scroll', function() {
                if (mobileActionsBar) {
                    const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
                    
                    if (scrollTop > lastScrollTop && scrollTop > 100) {
                        // Scrolling down
                        mobileActionsBar.style.transform = 'translateY(100px)';
                        mobileActionsBar.style.opacity = '0';
                    } else {
                        // Scrolling up
                        mobileActionsBar.style.transform = 'translateY(0)';
                        mobileActionsBar.style.opacity = '1';
                    }
                    
                    lastScrollTop = scrollTop;
                }
            });
            
            // Share functionality
            const shareButtons = document.querySelectorAll('button:has(.fa-share)');
            shareButtons.forEach(button => {
                button.addEventListener('click', function() {
                    if (navigator.share) {
                        navigator.share({
                            title: '{{ articles.sub_title|escapejs|truncatechars:50 }}',
                            text: 'Check out this article on FitBlit',
                            url: window.location.href
                        });
                    } else {
                        // Fallback: Copy to clipboard
                        navigator.clipboard.writeText(window.location.href);
                        // Show toast or feedback
                        const originalHTML = this.innerHTML;
                        this.innerHTML = '<i class="fa-solid fa-check"></i><span class="text-sm font-medium">Copied!</span>';
                        setTimeout(() => {
                            this.innerHTML = originalHTML;
                        }, 2000);
                    }
                });
            });
            
            // Lazy loading for images
            if ('IntersectionObserver' in window) {
                const imageObserver = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            const img = entry.target;
                            img.src = img.dataset.src;
                            imageObserver.unobserve(img);
                        }
                    });
                });
                
                document.querySelectorAll('img[data-src]').forEach(img => {
                    imageObserver.observe(img);
                });
            }
        });
    </script>
{% endblock %}